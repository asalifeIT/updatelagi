{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { FormControl, Validators } from '@angular/forms';\nimport { ModalController } from '@ionic/angular';\nimport { LoadingController } from '@ionic/angular';\nimport { ServiceService } from 'src/app/services/service.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"src/app/services/service.service\";\nimport * as i3 from \"@angular/forms\";\nexport let UpdateStatusAndDetailComponent = /*#__PURE__*/(() => {\n  class UpdateStatusAndDetailComponent {\n    constructor(modalController, loadingController, serviceService) {\n      this.modalController = modalController;\n      this.loadingController = loadingController;\n      this.serviceService = serviceService;\n      this.statusInput = new FormControl('', Validators.required);\n      this.picInput = new FormControl('', Validators.required);\n      this.durasiInput = new FormControl('', Validators.required);\n      this.priorityInput = new FormControl('', Validators.required);\n    }\n\n    dismissModal() {\n      this.modalController.dismiss(null, 'cancel');\n    }\n\n    updateStatusAndDetail() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const loading = yield this.loadingController.create({\n          message: 'Please wait...'\n        });\n        yield loading.present();\n        const payload = {\n          'status': this.statusInput.value ? this.statusInput.value : this.status,\n          'picnrp': this.picInput.value ? this.picInput.value : this.pic_nrp,\n          'duration': this.durasiInput.value ? this.durasiInput.value : this.duration,\n          'priority': this.priorityInput.value ? this.priorityInput.value : this.priority\n        };\n\n        if (payload.picnrp === null || payload.priority === null || payload.duration === null) {\n          this.resultMessage = 'Gagal update data, silakan lengkapi pilihan';\n          this.modalController.dismiss(this.resultMessage, 'resultMessage');\n          loading.dismiss();\n        }\n\n        if (this.statusInput.value === null && this.picInput.value === null && this.durasiInput.value === null && this.priorityInput.value === null) {\n          this.resultMessage = 'Tidak ada data yang diupdate';\n          this.modalController.dismiss(this.resultMessage, 'resultMessage');\n          loading.dismiss();\n        }\n\n        if (this.statusInput.value === this.status && this.picInput.value === this.pic_nrp && this.durasiInput.value === this.duration && this.priorityInput.value === this.priority) {\n          this.resultMessage = 'Tidak ada data yang diupdate';\n          this.modalController.dismiss(this.resultMessage, 'resultMessage');\n          loading.dismiss();\n        }\n\n        this.serviceService.updateStatus(payload, 'maintenance/update-order/', this.id).subscribe(data => {\n          console.log(data.body);\n          this.resultMessage = 'success';\n          this.modalController.dismiss(this.resultMessage, 'resultMessage');\n          loading.dismiss();\n        }, error => {\n          console.log(error.message);\n          this.resultMessage = 'Error';\n          loading.dismiss();\n        });\n      });\n    }\n\n  }\n\n  UpdateStatusAndDetailComponent.ɵfac = function UpdateStatusAndDetailComponent_Factory(t) {\n    return new (t || UpdateStatusAndDetailComponent)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i1.LoadingController), i0.ɵɵdirectiveInject(i2.ServiceService));\n  };\n\n  UpdateStatusAndDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UpdateStatusAndDetailComponent,\n    selectors: [[\"app-update-status-and-detail\"]],\n    inputs: {\n      id: \"id\",\n      status: \"status\",\n      priority: \"priority\",\n      duration: \"duration\",\n      pic_nrp: \"pic_nrp\"\n    },\n    decls: 36,\n    vars: 6,\n    consts: [[\"mode\", \"md\", 1, \"ion-no-border\"], [\"slot\", \"end\"], [3, \"click\"], [1, \"ion-padding\"], [\"position\", \"floating\"], [3, \"formControl\", \"value\"], [\"value\", \"OPEN\"], [\"value\", \"PROGRESS\"], [\"value\", \"HOLD\"], [\"value\", \"CLOSED\"], [3, \"value\", \"formControl\"], [\"value\", \"IMPORTANT\"], [\"value\", \"CRITICAL\"], [\"value\", \"IMPORTANT_CRITICAL\"], [\"expand\", \"block\", 1, \"ion-margin-top\", 3, \"click\"]],\n    template: function UpdateStatusAndDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Update Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-button\", 1)(5, \"ion-button\", 2);\n        i0.ɵɵlistener(\"click\", function UpdateStatusAndDetailComponent_Template_ion_button_click_5_listener() {\n          return ctx.dismissModal();\n        });\n        i0.ɵɵtext(6, \"Close\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(7, \"ion-content\", 3)(8, \"ion-item\")(9, \"ion-label\", 4);\n        i0.ɵɵtext(10, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"ion-select\", 5)(12, \"ion-select-option\", 6);\n        i0.ɵɵtext(13, \"OPEN\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"ion-select-option\", 7);\n        i0.ɵɵtext(15, \"PROGRESS\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"ion-select-option\", 8);\n        i0.ɵɵtext(17, \"HOLD\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"ion-select-option\", 9);\n        i0.ɵɵtext(19, \"CLOSED\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(20, \"ion-item\")(21, \"ion-label\", 4);\n        i0.ɵɵtext(22, \"Durasi\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"ion-datetime\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"ion-item\")(25, \"ion-label\", 4);\n        i0.ɵɵtext(26, \"Priority\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"ion-select\", 5)(28, \"ion-select-option\", 11);\n        i0.ɵɵtext(29, \"Important\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"ion-select-option\", 12);\n        i0.ɵɵtext(31, \"Critical\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"ion-select-option\", 13);\n        i0.ɵɵtext(33, \"Important & Critical\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(34, \"ion-button\", 14);\n        i0.ɵɵlistener(\"click\", function UpdateStatusAndDetailComponent_Template_ion_button_click_34_listener() {\n          return ctx.updateStatusAndDetail();\n        });\n        i0.ɵɵtext(35, \" Update \");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.status);\n        i0.ɵɵproperty(\"formControl\", ctx.statusInput);\n        i0.ɵɵadvance(12);\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.duration ? ctx.duration.substring(0, 10) : \"\");\n        i0.ɵɵproperty(\"formControl\", ctx.durasiInput);\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.priority);\n        i0.ɵɵproperty(\"formControl\", ctx.priorityInput);\n      }\n    },\n    dependencies: [i3.NgControlStatus, i1.IonButton, i1.IonContent, i1.IonDatetime, i1.IonHeader, i1.IonItem, i1.IonLabel, i1.IonSelect, i1.IonSelectOption, i1.IonToolbar, i1.IonTitle, i1.SelectValueAccessor, i3.FormControlDirective],\n    styles: [\"ion-item[_ngcontent-%COMP%]{--padding-start:0}\"]\n  });\n  return UpdateStatusAndDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}